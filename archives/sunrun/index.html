<!DOCTYPE HTML>
<html lang="zh-CN">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="张山崩,zhangshanbeng,blog" />
    <meta name="generator" content="Maverick 1.1" />
    <meta name="template" content="Galileo" />
    <link rel="alternate" type="application/rss+xml" title="Felix's site &raquo; RSS 2.0" href="/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Felix's site &raquo; ATOM 1.0" href="/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangshanbeng/site-Blog@gh-pages/assets/galileo-3f4dcc35c9.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangshanbeng/site-Blog@gh-pages/assets/ExSearch/ExSearch-182e5a8868.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangshanbeng/site-Blog@gh-pages/assets/katex.min.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700&display=swap">
    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/zhangshanbeng/site-Blog@gh-pages/184df123c5ce488252ea85c1c67a4a4c.json"
        }
    </script>
    
<title>Semi-automatic SunRun with MongoDB to manage IMEI - Felix's site</title>
<meta name="author" content="Felix" />
<meta name="description" content="半自动SunRun，Flask+MongoDB实现简单的IMEI管理web。" />
<meta property="og:title" content="Semi-automatic SunRun with MongoDB to manage IMEI - Felix's site" />
<meta property="og:description" content="半自动SunRun，Flask+MongoDB实现简单的IMEI管理web。" />
<meta property="og:site_name" content="Felix's site" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/archives/sunrun/" />
<meta property="og:image" content="" />
<meta property="article:published_time" content="2021-06-04T21:00:00-00.00" />
<meta name="twitter:title" content="Semi-automatic SunRun with MongoDB to manage IMEI - Felix's site" />
<meta name="twitter:description" content="半自动SunRun，Flask+MongoDB实现简单的IMEI管理web。" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="" />


    
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="//cdn.jsdelivr.net" />

    </head>
    
    <body>
        
        <div class="container">
            <header id="ga-header">
                <div first>
                    <aside id="ga-brand">
                        <h1 class="brand"><a class="no-style" href="/">Felix's site</a></h1>
                        <p>光与影的交织 黑与白的渗透</p>
                    </aside>
                </div>
                <div second id="ga-nav">
                    <nav class="navs">
                        <ul><li><a class="ga-highlight" href="/" target="_self">首页</a></li><span class="separator">·</span><li><a class="ga-highlight" href="/archives/" target="_self">归档</a></li><span class="separator">·</span><li><a class="ga-highlight" href="/about/" target="_self">关于</a></li><span class="separator">·</span><li><a href="#" target="_self" class="search-form-input ga-highlight">搜索</a></li></ul>
                    </nav>
                </div>
            </header>
            <div class="wrapper">
                
<main>    
    <section class="ga-section ga-content">
        <article class="yue">
            <h1 class="ga-post_title">Semi-automatic SunRun with MongoDB to manage IMEI</h1>
            <span class="ga-post_meta ga-mono">
                <span>Felix</span>
                <time>
                    2021-06-04
                </time>
                
                in <a no-style class="category" href="/category/Python/">
                    Python
                </a>
                
                
            </span>
            <div class="ga-content_body">
                <div class="notice">昨天晚上心血来潮，耐不住寂寞，写了这套IMEI自助管理。</div><h2>使用说明</h2>
<p>目前你所看见的是<a href="http://sunrun.zhangshanbeng.cn/">半自动SunRun</a>的初始版本，界面不堪入目。但是，既然这个项目能勉强跑通，那就勉强写一个说明。</p>
<p>项目主页分为两个部分：</p>
<ol>
<li>提交IMEI</li>
<li>注册</li>
</ol>
<p>逻辑也很简单，使用邮箱在本系统注册，该邮箱为你的唯一标识凭证。注册成功后，去提交你的IMEI。至此，该系统的主要功能已介绍完毕。</p>
<p><strong>注意：</strong></p>
<ol>
<li>在下一版本中，将加入IMEI失效邮件提醒功能</li>
<li>你可以随时随地更新你的IMEI</li>
<li>本系统将会在每天的早7点和晚7点执行一次SunRun任务，请合理安排时间</li>
<li>本系统仅供学习使用，请勿用于其他任何用途！</li>
</ol>
<h2>IMEI的获取</h2>
<p>大家自行百度，网上有足够多的教程
在<a href="https://liaoguoyin.com/2019/fake-aipao">阳光体育长跑的正确打开姿势-廖国胤</a>一文中，作者已给出明确的答案</p>
<h2>为什么做这个项目</h2>
<p>相比于冷冰冰的说明，我更喜欢讲故事。</p>
<p>我是一个喜欢偷懒的人，但并不妨碍我喜欢跑步。大一的时候我几乎每天都会去操场跑步，以至于云南白药没断过，也没少被舍友嫌弃。那时候，大家都刚进学校，涉世未深，对阳光长跑的水也没啥概念。那时候我干过一个人拿五六部手机一起刷时长，也干过去等速度3.8的傻事，也会在崩溃的某天傍晚以最慢的速度逛操场。</p>
<p>可是，这软件总是出纰漏，无法定位，数据丢包...毛病多到让人无法忍受，于是我打开了搜索引擎，去寻找SunRun的正确打开姿势。</p>
<p>和很多人一样，我第一个搜到是Fake Location，但是手机没有Root，放弃。于是，我不争气的打开了B站，搜到了一个使用模拟器模拟跑步的方法，于是转战模拟器（夜神），在合适的两点之间反复横跳。这中间涉及到一个根据经纬坐标计算直线距离，反正是在评论区大神的帮助下才成功假跑。这是我第一次云跑步成功，我没记错的话，那天我成功的时候已经熄灯了，兴奋了好久。</p>
<p>模拟器的反复横跳，实现了从1到0的质的突变，怎么能不得寸进尺一点，后面在@自救默示录（这位大神的名字是从廖国胤大神文章里看见的）的视频中我又发现了一个新的思路，My Android Tools。这个工具能修改App本地数据，在开始跑步后，修改相关参数即可。写轮眼的出现使得从1到0的本升专似的质变速度大大加快，一分钟一个SunRun，不要说太爽。说实话，这时候我已经很满足了，直到廖国胤大神的一篇博客进入我的眼帘，AiPao 脚本（一个Java脚本）。这篇博客让我对SunRun的原理有了一个直观的感受，特别是当时有一个对SunRun的逆向，虽然懂得不多，但是大致脉络懂得都懂。</p>
<p>有了脚本之后我就变得格外校长，但是图形化界面+并不友好的交互，逐渐让解放双手这件事也变得越来越离谱。这时候，也接触了Licsber的GO实现的SunRun，但是当时连GO咋调用都不会，直到期末的时候，部门里的一位大佬教了我怎么使用才如梦初醒。</p>
<p>到了这时候，SunRun已经可以简化为获取IMEI和输入IMEI两部分。获取是避免不了的，那可不可以将一周7次的输入缩减为一次，答案是可以的，我使用了腾讯云函数，但是每周都得换一次IMEI，着实令人头大，加上腾讯云臃肿的认证+跳转机制，我已经到了一个月更新一次IMEI的地步。</p>
<p>其实，促使我转向定时任务的最主要的原因是Aipao的API停止服务了。这怎么能忍，花了半个小时时间从Github上找了一个Python实现的脚本，魔改了一番，扔上了腾讯云函数。</p>
<p>至此，你以为结束了吗，不，我想让输入IMEI这一步更快一点。在廖国胤的正确打开阳光长跑一文最后的More部分，他提及了早已有人实现批量管理IMEI，每天自动执行+失效提醒，这也是我一直想要实现的。所以，这是一场持续了一年的心血来潮。</p>
<h2>做这个项目遇到了哪些困难</h2>
<ul>
<li>网页的编写</li>
</ul>
<p>我对前端知识的了解局限于爬虫和油猴脚本所需的知识，可以说是极度匮乏，不然也写不出这么烂的网页。</p>
<ul>
<li>连接数据库</li>
</ul>
<p>我对MongoDB的了解仅限于数据存储的实验四，只知道如何搭建+简单的增删改查命令。这是我第一次使用Python连接MongoDB，一直在尝试，一直在摔跤。</p>
<p>对数据库进行查找操作的时候碰到一个坑，db.collection.find() 返回的对象是<code>pymongo.cursor.Cursor</code>而不是dict或list，需要转换后再判断长度。</p>
<h2>总结</h2>
<p>这个项目仅仅是一个初代演示版本，后续将会丰富功能，完善逻辑，期待早日与你相会！</p>
<p>本项目地址:sunrun.zhangshanbeng.cn</p>

            </div>
        </article>
        <div id="ga-tags">
    
    <span class="ga-tag">
        <a class="ga-highlight" href="/tag/Python/">#Python</a>
    </span>
    
    <span class="ga-tag">
        <a class="ga-highlight" href="/tag/SunRun/">#SunRun</a>
    </span>
    
</div>
    </section>

    
<section id="ga-content_pager">

    <div class="next">
        <a class="ga-highlight" href="/archives/ding/">Ding - 成绩提醒服务</a>
        <p class="yue">一个能帮助你消除成绩焦虑的服务</p>
    </div>


    <div class="prev">
        <a class="ga-highlight" href="/archives/vivado20/">Vivado2020.2安装</a>
        <p class="yue">计算机组成实验安装需要，记录安装过程，方便以后回忆查漏</p>
    </div>

</section>


    

</main>

                <footer class="ga-mono" id="ga-footer">
                    <section>
                        <span id="ga-uptime"></span>
                        <span class="brand">Felix's site</span>
                    </section>
                    <section>
                        <p class="copyright">
                            <span>Copyright © 2022 张山崩</span>
                            <span>Powered by <a no-style href="https://github.com/AlanDecode/Maverick" target="_blank">Maverick & Galileo</a></span>
                        </p>
                        <div class="copyright">
                            <span class="footer-addon">
                                
                            </span>
                            <nav class="social-links">
                                <ul><li><a class="no-style" title="GitHub" href="https://github.com/zhangshanbeng" target="_blank"><i class="gi gi-github"></i>GitHub</a></li><span class="separator">·</span><li><a class="no-style" title="Weibo" href="https://weibo.com/234277266/" target="_blank"><i class="gi gi-weibo"></i>Weibo</a></li></ul>
                            </nav>
                        </div>
                    </section>
                    <script>
                        var site_build_date = "2020-01-11T11:11+08:00"
                    </script>
                    <script src="https://cdn.jsdelivr.net/gh/zhangshanbeng/site-Blog@gh-pages/assets/galileo-dc4baa7cf4.js"></script>
                </footer>
            </div>
        </div>
    </div>

    <!--katex-->
    <script defer src="https://cdn.jsdelivr.net/gh/zhangshanbeng/site-Blog@gh-pages/assets/katex.min.js"></script>
    <script>
    mathOpts = {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "\\[", right: "\\]", display: true},
            {left: "$", right: "$", display: false},
            {left: "\\(", right: "\\)", display: false}
        ]
    };
    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/zhangshanbeng/site-Blog@gh-pages/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

    <script src="https://cdn.jsdelivr.net/gh/zhangshanbeng/site-Blog@gh-pages/assets/ExSearch/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/zhangshanbeng/site-Blog@gh-pages/assets/ExSearch/ExSearch-493cb9cd89.js"></script>

    
    </body>
</html>